(this.webpackJsonpidentity=this.webpackJsonpidentity||[]).push([[0],{129:function(e,t,a){e.exports=a(161)},134:function(e,t,a){},136:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),l=a.n(i),o=(a(134),a(135),a(136),a(206)),c=a(208),s=a(210),u=a(43),m=a(248),d=a(19),p=Object(o.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{maxWidth:160,fontSize:30,marginRight:30,textAlign:"center"},authItem:{},toolbar:{}}}));function f(){var e=p();return r.a.createElement("div",{className:e.root},r.a.createElement(c.a,{position:"static"},r.a.createElement(s.a,{className:e.toolbar},r.a.createElement(u.a,{className:e.title},"Identity"),r.a.createElement(d.b,{to:"/identity/create",style:{textDecoration:"none",outline:"none"}},r.a.createElement(m.a,{style:{color:"white"}},"Home")),r.a.createElement(d.b,{to:"#",style:{textDecoration:"none",outline:"none"}},r.a.createElement(m.a,{style:{color:"white"}},"Form Preview")),r.a.createElement(d.b,{to:"#",style:{textDecoration:"none",outline:"none"}},r.a.createElement(m.a,{style:{color:"white"}},"Auth")))))}var g=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement("main",null,e.children))},h=a(18),v=a(246),b=a(227),E=a(243),y=a(226),O=a(245),I=a(211),x=a(249),T=a(240),j=Object(o.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,textAlign:"left"}}})),N=function(e){var t=e.formType,a=e.required,n=e.id,i=e.disabled,l=e.label,o=e.value,c=e.options,s=e.handler,u=j();return r.a.createElement(I.a,{required:a,variant:"outlined",className:u.formControl,key:n,disabled:i},r.a.createElement(x.a,{id:n},l),r.a.createElement(T.a,{required:a,native:!0,labelId:n,key:n,id:n,name:n,value:o,label:l,onChange:function(e){return s(e,t,"input")}},r.a.createElement("option",{key:"none","aria-label":"None",value:""}),c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))},L=a(214),S=a(242),k=function(e){var t=e.id,a=e.label,n=e.value,i=e.formType,l=e.handler;return r.a.createElement(L.a,{key:t,label:a,labelPlacement:"end",control:r.a.createElement(S.a,{key:t,value:n,checked:n,onChange:function(e){return l(e,i,"check")},id:t})})},C=Object(o.a)((function(e){return{root:{alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",marginTop:e.spacing(5),"& > *":{margin:e.spacing(1),width:"80%"}},formControl:{margin:e.spacing(1),minWidth:120,textAlign:"left"},selectEmpty:{marginTop:e.spacing(2)}}})),w=function(e){var t=e.form,a=e.handler,n=e.formType,i=C(),l=Object.keys(t).filter((function(e){return"isCompleted"!==e})).map((function(e){return t[e].id=e,t[e]}));return r.a.createElement("form",{className:i.root},l.map((function(e){switch(e.type){case"text":return r.a.createElement(O.a,{error:e.validation.isTouched&&!e.validation.isValid,helperText:e.helperText,disabled:e.disabled,hidden:e.hidden,key:e.id,required:e.validation.required,id:e.id,label:e.label,variant:"outlined",value:e.value,onChange:function(e){return a(e,n,"input")}});case"number":return r.a.createElement(O.a,{type:"number",error:e.validation.isTouched&&!e.validation.isValid,helperText:e.helperText,disabled:e.disabled,hidden:e.hidden,key:e.id,required:e.validation.required,id:e.id,label:e.label,variant:"outlined",value:e.value,onChange:function(e){return a(e,n,"input")}});case"select":return r.a.createElement(N,{required:e.validation.required,disabled:e.disabled,value:e.value,label:e.label,id:e.id,key:e.id,options:e.options,formType:n,handler:a});case"check":return r.a.createElement(k,{key:e.id,handler:a,formType:n,id:e.id,label:e.label,value:e.value});default:return null}})))},F=a(108),R={PERSONAL_INFO:{firstName:{disabled:!1,value:"",type:"text",error:!1,helperText:"",validation:{required:!0,minLength:3,maxLength:255,isTouched:!1,isValid:!1},label:"First Name"},middleName:{disabled:!1,value:"",type:"text",error:!1,helperText:"",validation:{required:!1,minLength:0,maxLength:255,isTouched:!1,isValid:!1},label:"Middle Name"},lastName:{disabled:!1,value:"",type:"text",error:!1,helperText:"",validation:{required:!0,minLength:3,maxLength:255,isTouched:!1,isValid:!1},label:"Last Name"},age:{disabled:!1,value:"",type:"number",error:!1,helperText:"",validation:{required:!0,minLength:2,maxLength:2,isTouched:!1,isValid:!1},label:"Age"},mobileNumber:{disabled:!1,value:"",type:"text",error:!1,helperText:"",validation:{required:!0,minLength:11,maxLength:16,isTouched:!1,isValid:!1},label:"Mobile Number"}},EDUCATIONAL_INFO:{metricMarks:{disabled:!1,value:"",type:"text",error:!1,helperText:"",validation:{required:!0,minLength:3,maxLength:3,isTouched:!1,isValid:!1},label:"Percentage in Metric"},intermediateMarks:{disabled:!1,value:"",type:"text",error:!1,helperText:"",validation:{required:!0,minLength:3,maxLength:3,isTouched:!1,isValid:!1},label:"Percentage in Intermediate"},bachelorCGPA:{disabled:!1,value:"",type:"select",options:[1,2,3,4],error:!1,helperText:"",validation:{required:!0,minLength:1,maxLength:6,isTouched:!1,isValid:!1},label:"CGPA in Bachelor "}},PROFESSIONAL_INFO:{status:{value:!1,type:"check",error:!1,helperText:"",validation:{required:!0,isTouched:!1,isValid:!0},label:"Are You Employed?"},companyName:{disabled:!0,value:"",type:"text",error:!1,helperText:"",validation:{required:!0,minLength:5,maxLength:255,isTouched:!1,isValid:!1},label:"Name of Company"},designationName:{disabled:!0,value:"",type:"text",error:!1,helperText:"",validation:{required:!0,minLength:5,maxLength:255,isTouched:!1,isValid:!1},label:"Designation Name"}},EXCISE_INFO:{isVehicle:{value:!1,type:"check",error:!1,helperText:"",validation:{required:!1,isValid:!0},label:"Have you vehicle?"},type:{disabled:!0,value:"",type:"select",options:["Bike","SVM"],error:!1,helperText:"",validation:{required:!0,minLength:1,maxLength:255,isTouched:!1,isValid:!1},label:"Type"},plateNumber:{disabled:!0,type:"text",value:"",error:!1,helperText:"",validation:{required:!0,minLength:4,maxLength:10,isTouched:!1,isValid:!1},label:"Plate Number"}},RESIDENT_INFO:{isHouse:{value:!1,type:"check",error:!1,helperText:"",validation:{required:!1,isValid:!0},label:"Are you own a house?"},houseNumber:{disabled:!0,value:"",type:"text",error:!1,helperText:"",validation:{required:!0,minLength:4,maxLength:10,isTouched:!1,isValid:!0},label:"House Number"}}},P=[{step:0,label:"Personal Info",value:"PERSONAL_INFO"},{step:1,label:"Educational Info",value:"EDUCATIONAL_INFO"},{step:2,label:"Professional Info",value:"PROFESSIONAL_INFO"},{step:3,label:"Excise Info",value:"EXCISE_INFO"},{step:4,label:"Resident Info",value:"RESIDENT_INFO"},{step:5,label:"Preview",value:"PREVIEW"}],A=a(10),V=a(30),U=a.n(V),_=a(49),q=a.n(_),D=q.a.create({baseURL:"https://react-demo-45a1b.firebaseio.com/"}),W=function(){return{type:"LOGIN_START"}},M=function(e,t,a,n,r){return{type:"LOGIN_SUCCESS",username:e,token:t,id:a,entityId:n,formInfo:r}},G=function(){return{type:"LOGIN_ERROR"}},B=function(e,t,a,n){var r={formId:e,isFormCompleted:t.isFormCompleted,isFormTouched:!0};D.put("/users/".concat(a.entityId,".json"),{userId:a.userId,username:a.username,formInfo:r}).then((function(){n(function(e){return{type:"UPDATE_USER_INFO",formInfo:e}}(r))})).catch((function(e){console.log(e)}))},H=function(e,t){return{type:"NEXT_FORM",info:e,formId:t}},z=function(){return{type:"FORM_UPDATING"}},Y=function(e){return function(t){D.get("/identity/".concat(e,".json")).then((function(a){console.log(a),t(X(a.data,e))})).catch((function(e){console.log(e)}))}},X=function(e,t){return{type:"POPULATE_FORM",form:e,formId:t,isCompleted:e.isFormCompleted}},Z=a(244),J=a(225),$=a(223),K=a(224),Q=a(222),ee=a(217),te=a(221),ae=a(220),ne=a(216),re=a(218),ie=a(219),le=Object(o.a)((function(e){return{root:{alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",marginTop:e.spacing(5),"& > *":{margin:e.spacing(1),width:"80%"}},formControl:{margin:e.spacing(1),minWidth:120,textAlign:"left"},selectEmpty:{marginTop:e.spacing(2)},table:{minWidth:650}}})),oe=function(e){var t=e.form,a=le();return r.a.createElement(r.a.Fragment,null,Object.keys(t).map((function(e){var n=t[e];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,e),r.a.createElement(ne.a,{component:F.a},r.a.createElement(ee.a,{className:a.table,"aria-label":"simple table"},r.a.createElement(re.a,null,r.a.createElement(ie.a,null,r.a.createElement(ae.a,{width:"20%"},r.a.createElement("strong",null,"Field Name")),r.a.createElement(ae.a,{width:"40%"},r.a.createElement("strong",null,"Value")))),r.a.createElement(te.a,null,Object.keys(n).map((function(e){var t=n[e];return r.a.createElement(ie.a,{key:t.label},r.a.createElement(ae.a,{component:"th",scope:"row"},t.label),r.a.createElement(ae.a,null,t.value))}))))))})))},ce=function(e){var t=e.open,a=e.modalHandler,n=e.form,i=e.saveFormHandler,l=r.a.useRef(null);return r.a.useEffect((function(){if(t){var e=l.current;null!==e&&e.focus()}}),[t]),r.a.createElement("div",null,r.a.createElement(Z.a,{open:t,onClose:a,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(Q.a,{id:"scroll-dialog-title"},"Form Preview"),r.a.createElement($.a,{dividers:!0},r.a.createElement(K.a,{id:"scroll-dialog-description",ref:l,tabIndex:-1},r.a.createElement(oe,{form:n}))),r.a.createElement(J.a,null,r.a.createElement(y.a,{onClick:a,color:"primary"},"Cancel"),r.a.createElement(y.a,{onClick:i,color:"primary"},"Save"))))},se=Object(n.createContext)({username:null,userId:null,isLogin:!1,entityId:null}),ue=function(e){var t={username:Object(A.c)((function(e){return e.login.username})),userId:Object(A.c)((function(e){return e.login.id})),isLogin:Object(A.c)((function(e){return e.login.isLogin})),entityId:Object(A.c)((function(e){return e.login.entityId}))};return console.log("User Provider -> ",t),r.a.createElement(se.Provider,{value:t},e.children)},me=Object(o.a)((function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},paper:{padding:e.spacing(2),margin:e.spacing(2),marginRight:"auto",marginLeft:"auto",width:"80%",height:"500px"},stepProgress:{color:"red"}}}));var de=function(){var e=me(),t=r.a.useState(P[0]),a=Object(h.a)(t,2),i=a[0],l=a[1],o=Object(n.useState)(!1),c=Object(h.a)(o,2),s=c[0],m=c[1],d=P.filter((function(e){return 5!==e.step})).map((function(e){return e.label})),p=Object(n.useContext)(se),f=Object(A.b)(),g=Object(n.useCallback)((function(e,t,a){return f(function(e,t,a){return function(n){t?(n(z()),D.put("/identity/".concat(t,".json"),e).then((function(r){B(t,e,a,n),n(H(e,t))})).catch((function(e){console.log(e)}))):D.post("/identity.json",e).then((function(t){B(t.data.name,e,a,n),n(H(e,t.data.name))})).catch((function(e){console.log(e)}))}}(e,t,a))}),[f]),O=Object(A.c)((function(e){return e.form.formId})),I=Object(A.c)((function(e){return e.form.form})),x=Object(n.useState)(R),T=Object(h.a)(x,2),j=T[0],N=T[1],L=Object(n.useState)(!0),S=Object(h.a)(L,2),k=S[0],C=S[1],V=Object(n.useState)(!1),_=Object(h.a)(V,2),q=_[0],W=_[1];function M(){var e=U.a.clone(j),t={};for(var a in e){var n=e[a],r={},l=P.slice(0,i.step+1).map((function(e){return e.value}));for(var o in l.includes(a)&&(r.isCompleted=s),n)if(n.hasOwnProperty(o)){var c=n[o];c.disabled||(r[o]=c.value)}t[a]=r}return t}Object(n.useEffect)((function(){if(console.log("Use Effect of Forms.js formId ---\x3e ",O),null!==O){var e=U.a.clone(j);for(var t in e){var a=e[t],n=I[t];for(var r in n)"isCompleted"!==r&&n.hasOwnProperty(r)&&n.isCompleted&&(m(!0),a[r].value=n[r],a[r].validation.isValid=!0,a[r].validation.isTouched=!0,console.log(a[r]),console.log(n[r]))}console.log("Use Effect of Forms.js formId ---\x3e ",e),N(e),G(P[0])}}),[I]);var G=function(e){var t=U.a.clone(j)[e.value];Z(t)?C(!1):C(!0)},Y=function(e,t){var a=U.a.clone(j),n=a[e.value];for(var r in n)n.hasOwnProperty(r)&&("text"!==n[r].type&&"select"!==n[r].type||(n[r].disabled=t));console.log("New Identity Form: => ",a),N(a)},X=function(e,t){return(e=String(e)).length>=t.minLength&&e.length<=t.maxLength},Z=function(e){for(var t in e)if("isCompleted"!==t&&e.hasOwnProperty(t)){var a=e[t];if(console.log("Field: -> ",a),!a.disabled&&!a.validation.isValid)return console.log("Form is not valid -> returning false"),!1}return console.log("Form is Valid"),!0};return r.a.createElement("div",{className:e.root},r.a.createElement(v.a,{activeStep:i.step,alternativeLabel:!0},d.map((function(t){return r.a.createElement(b.a,{key:t,className:e.stepProgress},r.a.createElement(E.a,null,t))}))),r.a.createElement("div",null,i.step===d.length?r.a.createElement("div",null,r.a.createElement(u.a,{className:e.instructions},"All steps completed"),r.a.createElement(y.a,{onClick:function(){l(P[0])}},"Reset")):r.a.createElement("div",null,r.a.createElement(F.a,{elevation:3,className:e.paper},r.a.createElement(w,{form:j[i.value],formType:i,handler:function(e,t,a){var n=U.a.clone(j),r=n[t.value],i=e.target.id;if(void 0===i&&(i=e.target.name),"check"===a)r[i].value=e.target.checked,e.target.checked?Y(t,!1):Y(t,!0);else{var l=r[i];l.helperText="",l.value=e.target.value,l.validation.isTouched=!0;var o=X(l.value,l.validation);switch(l.validation.isValid=o,o||(l.helperText="Value should be in range [".concat(l.validation.minLength," ").concat(l.validation.maxLength,"]")),"age"===l.id&&(l.value<1||l.value>75)&&(l.validation.isValid=!1,l.helperText="Value should be positive"),l.id){case"metricMarks":case"intermediateMarks":l.value.includes("%")||(l.helperText="% sign is missing")}}Z(r)?(m(!0),C(!1)):(m(!1),C(!0)),N(n)}})),r.a.createElement("div",null,r.a.createElement(y.a,{disabled:0===i.step,onClick:function(){l((function(e){return G(P[e.step-1]),P[e.step-1]}))},className:e.backButton},"Back"),i.step!==d.length-1?r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){var e=M();e.isFormCompleted=!1,g(e,O,p),l((function(e){return G(P[e.step+1]),P[e.step+1]}))},disabled:k},"Next"):r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return W(!0)},disabled:k},"Preview")))),r.a.createElement(ce,{form:j,open:q,modalHandler:function(){return W(!1)},saveFormHandler:function(){W(!1);var e=M();e.isFormCompleted=!0,g(e,O,p),l(P[0]),C(!0),function(){var e=U.a.clone(j);for(var t in e){var a=e[t];if(a===R.PROFESSIONAL_INFO||a===R.EXCISE_INFO||a===R.RESIDENT_INFO){for(var n in a)if("isCompleted"!==n&&a.hasOwnProperty(n)){var r=a[n];"check"===r.type?r.value=!1:(r.disabled=!0,r.value="",r.validation.isValid=!1,r.validation.isTouched=!1)}}else for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];l.value="",l.validation.isValid=!1,l.validation.isTouched=!1}}N(e)}()}}))},pe=a(12),fe=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1),width:e.spacing(16),height:e.spacing(16)}}}})),ge=function(){var e=fe(),t=Object(A.c)((function(e){return e.form.form}));return r.a.createElement(F.a,{elevation:3,className:e.root},r.a.createElement(oe,{form:t}))},he=a(106),ve=function(e){var t=e.component,a=Object(he.a)(e,["component"]),i=Object(n.useContext)(se);return console.log("GaurdedRoute.js executing: user ----\x3e ",i),r.a.createElement(pe.b,Object.assign({},a,{render:function(e){return!0===i.isLogin?r.a.createElement(t,e):r.a.createElement(pe.a,{to:"/identity"})}}))},be=a(231),Ee=a(232),ye=a(235),Oe=a(234),Ie=a(233),xe=a(228),Te=a(229),je=a(247),Ne=a(101),Le=a.n(Ne),Se=a(230),ke=Object(o.a)((function(e){return{paper:{marginTop:e.spacing(-20),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),Ce=function(){var e=ke(),t=Object(A.b)(),a=Object(n.useCallback)((function(){return t((function(e){var t=localStorage.getItem("userId"),a=localStorage.getItem("token");t&&a&&D.get('users.json?orderBy="userId"&equalTo="'.concat(t,'"')).then((function(t){console.log(t);var n=Object.keys(t.data),r=Object(h.a)(n,1)[0];console.log(r);var i=Object.keys(t.data).map((function(e){return t.data[e]})),l=Object(h.a)(i,1)[0];console.log(l),e(M(l.username,a,l.userId,r,l.formInfo));var o=l.formInfo.formId;o&&e(Y(o))})).catch((function(t){console.log(t),e(G())}))}))}),[t]),i=Object(A.c)((function(e){return e.login.isLogin}));return a(),i?r.a.createElement(pe.a,{to:"/identity/welcome"}):r.a.createElement(xe.a,{component:"main",maxWidth:"xs"},r.a.createElement(Te.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Se.a,{container:!0,spacing:2},r.a.createElement(Se.a,{item:!0},r.a.createElement(be.a,{className:e.root},r.a.createElement(Ee.a,null,r.a.createElement(Ie.a,{className:e.media},r.a.createElement(je.a,{className:e.avatar},r.a.createElement(Le.a,null))),r.a.createElement(Oe.a,null,r.a.createElement(u.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Identity"),r.a.createElement(u.a,{variant:"body2",color:"textSecondary",component:"p"},"Identity is the Project initiated by Govt of Pakistan to register yourself from anywhere."))),r.a.createElement(ye.a,null,r.a.createElement(d.b,{to:"/identity/login",style:{textDecoration:"none",outline:"none"}},r.a.createElement(y.a,{size:"small",color:"primary"},"Sign In"))))))))},we=function(){return r.a.createElement(Se.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"calc(100vh - 11vh)"}},r.a.createElement(Se.a,{item:!0,xs:8,xl:2,sm:5},r.a.createElement(Ce,null)))},Fe=a(236),Re=a(239),Pe=a(70),Ae=a.n(Pe),Ve=a(237),Ue=function(){return r.a.createElement(u.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Fe.a,{color:"inherit",href:"https://github.com/UbaidurRehman1/identity"},"Identity")," ",(new Date).getFullYear(),".")},_e=Object(o.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),qe=function(){var e=_e(),t=Object(n.useState)(""),a=Object(h.a)(t,2),i=a[0],l=a[1],o=Object(n.useState)(""),c=Object(h.a)(o,2),s=c[0],m=c[1],p=Object(A.b)(),f=Object(n.useCallback)((function(e,t){return p(function(e,t){return function(a){a(W()),q.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAU_vVv_YXI-3RAqIfCYeRYmhqke8Uv7xw",{email:e,password:t}).then((function(e){console.log(e);var t=e.data.idToken,n=e.data.localId,r=e.data.expiresIn;localStorage.setItem("token",t),localStorage.setItem("userId",n),localStorage.setItem("expiryTime",r),D.get('users.json?orderBy="userId"&equalTo="'.concat(e.data.localId,'"')).then((function(e){console.log(e);var n=Object.keys(e.data),r=Object(h.a)(n,1)[0],i=Object.keys(e.data).map((function(t){return e.data[t]})),l=Object(h.a)(i,1)[0];console.log(l),a(M(l.username,t,l.userId,r,l.formInfo))})).catch((function(e){console.log(e),console.log(e)}))})).catch((function(e){a(G()),console.log(e)}))}}(e,t))}),[p]),g=Object(A.c)((function(e){return e.login.loginStart})),v=Object(A.c)((function(e){return e.login.isLogin}));return v?r.a.createElement(pe.a,{to:"/identity/welcome"}):r.a.createElement(xe.a,{component:"main",maxWidth:"xs"},r.a.createElement(Te.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(je.a,{className:e.avatar},r.a.createElement(Ae.a,null)),r.a.createElement(u.a,{component:"h1",variant:"h5"},"Log in"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){return function(e){e.preventDefault(),f(i,s)}(e)}},r.a.createElement(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:i,onChange:function(e){return l(e.target.value)}}),r.a.createElement(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:s,onChange:function(e){return m(e.target.value)}}),g?r.a.createElement(Ve.a,{style:{marginTop:"8px"}}):r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Log In"),r.a.createElement(Se.a,{container:!0},r.a.createElement(Se.a,{item:!0},r.a.createElement(d.b,{to:"/identity/signup",style:{textDecoration:"none",outline:"none"}},r.a.createElement(y.a,{size:"small",color:"primary"},"Don't have an account? Sign Up")))))),r.a.createElement(Re.a,{mt:8},r.a.createElement(Ue,null)))},De=a(8),We=function(e,t,a){return localStorage.setItem("token",e),localStorage.setItem("userId",a),localStorage.setItem("expiryTime",t),{type:"SET_TIMEOUT",timeout:setTimeout((function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("expiryTime")}),1e3*t)}},Me=function(){return{type:"SIGNUP_START",payload:null}},Ge=function(e){return{type:"SIGNUP_FINISHED",payload:e}},Be=function(e){return{type:"SIGNUP_ERROR",payload:null,error:e}},He=function(){return r.a.createElement(u.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Fe.a,{color:"inherit",href:"https://github.com/UbaidurRehman1/identity"},"Identity")," ",(new Date).getFullYear(),".")},ze=Object(o.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),Ye=function(){var e=ze(),t=Object(A.b)(),a=Object(n.useCallback)((function(e){return t(function(e){return function(t){t(Me()),q.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAU_vVv_YXI-3RAqIfCYeRYmhqke8Uv7xw",e).then((function(a){console.log(a),D.post("/users.json",{username:e.firstName+" "+e.lastName,userId:a.data.localId}).then((function(){t(We(a.data.idToken,a.data.expiresIn,a.data.localId)),t(Ge(Object(De.a)(Object(De.a)({},a.data),{},{username:e.firstName+" "+e.lastName})))})).catch((function(e){console.log(e),t(Be(e.message))}))})).catch((function(e){console.log(e),t(Be(e.message))}))}}(e))}),[t]),i=Object(A.c)((function(e){return e.auth.isLogin})),l=Object(A.c)((function(e){return e.auth.isSignUpLoading})),o={firstName:{disabled:!1,value:"",type:"text",autoComplete:"fname",name:"firstName",variant:"outlined",fullWidth:!0,id:"firstName",key:"firstName",autoFocus:!0,required:!0,error:!1,helperText:"",onChange:function(e){return f("firstName",e)},validation:{minLength:3,maxLength:255,isTouched:!1,isValid:!1},label:"First Name"},lastName:{disabled:!1,value:"",type:"text",variant:"outlined",required:!0,fullWidth:!0,id:"lastName",ket:"lastName",name:"lastName",autoComplete:"lname",error:!1,helperText:"",onChange:function(e){return f("lastName",e)},validation:{required:!0,minLength:3,maxLength:255,isTouched:!1,isValid:!1},label:"Last Name"},email:{disabled:!1,value:"",type:"email",variant:"outlined",required:!0,fullWidth:!0,id:"email",key:"email",name:"email",autoComplete:"email",error:!1,helperText:"",onChange:function(e){return f("email",e)},validation:{minLength:6,maxLength:255,isTouched:!1,isValid:!1},label:"Email Address"},password:{disabled:!1,value:"",type:"password",variant:"outlined",required:!0,fullWidth:!0,name:"password",id:"password",key:"password",autoComplete:"current-password",error:!1,helperText:"",onChange:function(e){return f("password",e)},validation:{minLength:8,maxLength:16,isTouched:!1,isValid:!1},label:"Password"}},c=Object(n.useState)(o),s=Object(h.a)(c,2),m=s[0],p=s[1],f=function(e,t){var a=U.a.clone(m);a[e].validation.isTouched=!0,a[e].value=t.target.value,e===m.firstName.id||e===m.lastName.id?g(a[e]):e===m.email.id?v(a[e]):e===m.password.id&&b(a[e]),p(a)},g=function(e){e.validation.isTouched&&(e.value.length<e.validation.minLength||e.value.length>e.validation.maxLength?(e.validation.isValid=!1,e.error=!0,e.helperText="Min Val: "+e.validation.minLength+", Max Val: "+e.validation.maxLength):(e.error=!1,e.helperText=""))},v=function(e){var t=e.value;/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())?(e.error=!1,e.helperText=""):(e.validation.isValid=!1,e.error=!0,e.helperText="Invalid Email Address")},b=function(e){var t=e.value;/[A-Z]/.test(t)&&/[a-z]/.test(t)&&/[0-9]/.test(t)&&/[^A-Za-z0-9]/.test(t)&&t.length>4?(e.error=!1,e.helperText=""):(e.validation.isValid=!1,e.error=!0,e.helperText="Password should at least contain an upper case letter, a lower case letter, a digit and a special symbol and greater than 4 digits")};return i?r.a.createElement(pe.a,{to:"/identity/welcome"}):r.a.createElement(xe.a,{component:"main",maxWidth:"xs"},r.a.createElement(Te.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(je.a,{className:e.avatar},r.a.createElement(Ae.a,null)),r.a.createElement(u.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){return function(e){e.preventDefault();var t=U.a.clone(m),n={};Object.keys(t).map((function(e){return n[e]=t[e].value,null})),console.log("Submitting Form: -> ",n),a(n)}(e)}},r.a.createElement(Se.a,{container:!0,spacing:2},Object.keys(m).map((function(e){var t=m[e];return t===m.firstName||t===m.lastName?r.a.createElement(Se.a,{item:!0,xs:12,sm:6,key:e},r.a.createElement(O.a,t)):r.a.createElement(Se.a,{item:!0,xs:12,key:e},r.a.createElement(O.a,t))}))),l?r.a.createElement(Ve.a,{style:{marginTop:"8px"}}):r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign Up"),r.a.createElement(Se.a,{container:!0,justify:"flex-end"},r.a.createElement(Se.a,{item:!0},r.a.createElement(d.b,{to:"/identity/login",style:{textDecoration:"none",outline:"none"}},r.a.createElement(y.a,{size:"small",color:"primary"},"Already have an account? Sign in")))))),r.a.createElement(Re.a,{mt:5},r.a.createElement(He,null)))},Xe=a(238),Ze=a(215),Je=a(103),$e=a.n(Je),Ke=a(104),Qe=a.n(Ke),et=a(102),tt=a.n(et),at=Object(o.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},card:{maxWidth:345}}})),nt=function(){var e=Object(n.useContext)(se),t=Object(A.c)((function(e){return e.login.formInfo.formId})),a=Object(A.c)((function(e){return e.login.formInfo.isFormCompleted})),i=Object(A.c)((function(e){return e.login.formInfo.isFormTouched})),l=Object(n.useRef)();Object(n.useEffect)((function(){var e=null;null==t?e="Welcome in Identity. Click below to start filling your Identity form":a?a&&(e="Your Identity form is completed"):e="You have not completed your Identity form yet. Kindly complete your form as soon as possible",l.current.innerHTML=e}),[t,a,i]);var o=at();return r.a.createElement(xe.a,{component:"main",maxWidth:"xs"},r.a.createElement(Te.a,null),r.a.createElement("div",{className:o.paper},r.a.createElement(Se.a,{container:!0,spacing:2,justify:"flex-start",style:{marginTop:"8px"}},r.a.createElement(Se.a,{item:!0},r.a.createElement(be.a,{className:o.card},r.a.createElement(Xe.a,{avatar:r.a.createElement(je.a,{"aria-label":"recipe",className:o.avatar},"U"),action:r.a.createElement(Ze.a,{"aria-label":"settings"},r.a.createElement(tt.a,null)),title:"Welcome Back",subheader:e.username}),r.a.createElement(Ie.a,{className:o.media,image:"/static/images/cards/paella.jpg",title:"Paella dish"}),r.a.createElement(Oe.a,null,r.a.createElement(u.a,{ref:l,variant:"body2",color:"textSecondary",component:"p"})),r.a.createElement(ye.a,{disableSpacing:!0},r.a.createElement(Ze.a,{"aria-label":"add to favorites"},r.a.createElement($e.a,null)),r.a.createElement(Ze.a,{"aria-label":"share"},r.a.createElement(Qe.a,null)))))),r.a.createElement(Se.a,{container:!0,spacing:2,justify:"flex-start"},r.a.createElement(Se.a,{item:!0},r.a.createElement(d.b,{to:"/identity/create",style:{textDecoration:"none",outline:"none"}},r.a.createElement(y.a,{size:"small",color:"primary"},"Click here to fill your identity form"))))))};var rt=function(){var e=r.a.createElement(pe.d,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading ....")},r.a.createElement(ve,{path:"/identity/create",exact:!0,component:de}),r.a.createElement(ve,{path:"/identity/preview",exact:!0,component:ge}),r.a.createElement(ve,{path:"/identity/welcome",exact:!0,component:nt}),r.a.createElement(pe.b,{path:"/identity/signup",exact:!0,component:Ye}),r.a.createElement(pe.b,{path:"/identity/login",exact:!0,component:qe}),r.a.createElement(pe.b,{path:"/identity",exact:!0,component:we})));return r.a.createElement("div",{className:"App"},r.a.createElement(g,null,r.a.createElement(ue,null,e)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var it,lt=a(34),ot={formId:null,form:null,isCompleted:!1,error:null,isUpdating:!1},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEXT_FORM":return Object(De.a)(Object(De.a)({},e),{},{form:t.info,formId:t.formId,isUpdating:!1});case"HALT_FORM":return Object(De.a)(Object(De.a)({},e),{},{error:t.error});case"FORM_UPDATING":return Object(De.a)(Object(De.a)({},e),{},{isUpdating:!0});case"POPULATE_FORM":return Object(De.a)(Object(De.a)({},e),{},{form:t.form,formId:t.formId,isCompleted:t.isCompleted});default:return e}},st=a(81),ut=(a(105),{user:null,isLogin:!1,isError:!1,error:"",isSignUpLoading:!1,timeout:null}),mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_START":return Object(De.a)(Object(De.a)({},e),{},{isLogin:!1,isError:!1,isSignUpLoading:!0});case"SIGNUP_FINISHED":return Object(De.a)(Object(De.a)({},e),{},{user:Object(De.a)({},t.payload),isLogin:!0,isSignUpLoading:!1});case"SIGNUP_ERROR":return Object(De.a)(Object(De.a)({},e),{},{user:null,isError:!0,isLogin:!1,isSignUpLoading:!1,error:t.error});case"SET_TIMEOUT":return Object(De.a)(Object(De.a)({},e),{},{timeout:t.timeout});default:return e}},dt={isLogin:!1,loginStart:!1,loginError:!1,username:null,token:null,id:null,entityId:null,formInfo:{formId:null,isFormCompleted:null,isFormTouched:null}},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_START":return Object(De.a)(Object(De.a)({},e),{},{isLogin:!1,loginStart:!0,loginError:!1,formInfo:null});case"LOGIN_SUCCESS":return console.log(t),Object(De.a)(Object(De.a)({},e),{},{isLogin:!0,loginStart:!1,loginError:!1,username:t.username,token:t.token,id:t.id,entityId:t.entityId,formInfo:t.formInfo});case"LOGIN_ERROR":return Object(De.a)(Object(De.a)({},e),{},{isLogin:!1,loginStart:!1,loginError:!0,formInfo:null});case"LOGOUT":return Object(De.a)(Object(De.a)({},e),{},{isLogin:!1,loginStart:!1,loginError:!1,username:null,token:null,formInfo:null});case"UPDATE_USER_INFO":return Object(De.a)(Object(De.a)({},e),{},{formInfo:t.formInfo});default:return e}},ft=Object(lt.combineReducers)({form:ct,auth:mt,login:pt});it=Object(lt.createStore)(ft,Object(lt.applyMiddleware)(st.a)),l.a.render(r.a.createElement(A.a,{store:it},r.a.createElement(d.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(rt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.a1d6c071.chunk.js.map